<file path="catalog/controller/common/header2.php">
        
             <operation>
            <search><![CDATA[$data['title'] = $this->document->getTitle();]]></search>
            <add position="before"><![CDATA[
            $theme = $this->config->get( 'config_theme' );

            $data['pavmegamenu'] = $this->load->controller('extension/module/pavmegamenu');
            $data['pavoheader'] = $this->model_extension_module_pavothemer->getHeader();
            $data['offcanvas']  = $this->model_extension_module_pavothemer->getConfig( 'offcanvas' );
       ]]></add>
        </operation>
        
        <operation>
            <search><![CDATA[$data['logo'] = $server . 'image/' . $this->config->get('config_logo');]]></search>
            <add position="before"><![CDATA[
            $data['logo'] = defined('IMAGE_URL') ? IMAGE_URL . $this->config->get('config_logo') : $server . 'image/' . $this->config->get('config_logo');
       ]]></add>
        </operation>
        
         <operation>
            <search><![CDATA[return $this->load->view('common/header', $data);]]></search>
            <add position="before"><![CDATA[
            if( empty($data['pavoheader']) ) {
                $header_layout  = $this->model_extension_module_pavothemer->getConfig( 'header_layout' );
                if( $header_layout ){
                    return $this->load->view('common/'.trim($header_layout), $data);
                }
            }

       ]]></add>
        </operation>

        <operation>
            <search><![CDATA[return $this->load->view('common/header', $data);]]></search>
            <add position="replace"><![CDATA[
        // $data['body_class'] = $this->getBodyClass();
        // pavothemer header layout file
        // $data['styles'] = $this->document->getStyles();
        // $data['scripts'] = $this->document->getScripts('header');
        // $data['styles'] = $this->model_extension_module_pavothemer->compressCss( $data['styles'] );
        // $data['scripts'] = $this->model_extension_module_pavothemer->compressJs( $data['scripts'] );

        return $this->load->view('common/header', $data);
    }

    /**
     * Get body class
     */
    public function getBodyClass() {
        $this->load->model( 'extension/module/pavothemer' );
        $route = ! empty( $this->request->get['route'] ) ? $this->request->get['route'] : 'common/home';

        $class = '';
        if( $this->config->get( 'pavothemer_keepheader' ) ){
            $class = ' has-header-sticky';
        }
        $class .= $this->model_extension_module_pavothemer->getBodyClass();
        return 'page-' . implode( '-', explode( '/', $route ) ) . $class;
            ]]></add>
        </operation>
    </file>
    
    
    <file path="catalog/controller/common/footer.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/footer', $data);]]></search>
            <add position="before"><![CDATA[
                // pavothemer footer layout file
                $this->load->model( 'extension/module/pavothemer' );
                $data['blockbuilder'] = $this->model_extension_module_pavothemer->getFooter();
            ]]></add>
        </operation>
    </file>

     <file path="system/engine/loader.php">
        <operation>
            <search>
                <![CDATA[foreach ($data as $key => $value) {]]>
            </search>
            <add position="before">
                <![CDATA[$template->set( 'product_grid_layout', $this->registry->get('config')->get( 'pavothemer_product_grid_layout' ) );]]>
                <![CDATA[$template->set( 'product_grid_style', $this->registry->get('config')->get( 'pavothemer_product_grid_style' ) );]]>
            </add>
        </operation>
    </file>

    <file path="catalog/controller/product/compare.php">
        <operation>
            <search><![CDATA[$this->response->redirect($this->url->link('product/compare'));]]></search>
            <add position="replace"><![CDATA[
                if (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
                    $results = array();
                    $results['status'] = true;
                    $results['success'] = $this->session->data['success'];
                    $results['total'] = count($this->session->data['compare']);
                    $results['text_compare'] = sprintf( $this->language->get('text_compare'), $results['total'] );
                    unset($this->session->data['success']);
                    echo json_encode($results); die();
                } else {
                    $this->response->redirect($this->url->link('product/compare'));
                }
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/product/product.php">
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/product', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer product layout file

                $this->load->model( 'extension/module/pavothemer' );
                $layout = $this->model_extension_module_pavothemer->getConfig( 'product_layout' );
                $data['preview'] =  $this->model_extension_module_pavothemer->getConfig( 'preview' );
                $data['preview'] .= " " .  $this->model_extension_module_pavothemer->getConfig( 'zoommode' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/product', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="before">
                <![CDATA[
                    $output = array();
                    $images = $this->model_catalog_product->getProductImages( $result['product_id'] );
                    if( $images ){
                        foreach( $images as $timage ){
                            if ($timage['image']) {
                                $tmp = $this->model_tool_image->resize($timage['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            } else {
                                $tmp = $this->model_tool_image->resize('placeholder.png', $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            }
                            $output[] = $tmp;
                        }
                    }
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="after">
                <![CDATA[
                    'images'      => $output,
                ]]>
            </add>
        </operation>
    </file>
    <file path="catalog/controller/product/search.php">
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="before">
                <![CDATA[
                    $output = array();
                    $images = $this->model_catalog_product->getProductImages( $result['product_id'] );
                    if( $images ){
                        foreach( $images as $timage ){
                            if ($timage['image']) {
                                $tmp = $this->model_tool_image->resize($timage['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            } else {
                                $tmp = $this->model_tool_image->resize('placeholder.png', $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            }
                            $output[] = $tmp;
                        }
                    }
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="after">
                <![CDATA[
                    'images'      => $output,
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/category', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer category layout file

                $this->load->model( 'extension/module/pavothemer' );
                $layout =  $this->model_extension_module_pavothemer->getConfig( 'category_layout' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/category', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
    </file>
    <file path="catalog/controller/product/special.php">
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="before">
                <![CDATA[
                    $output = array();
                    $images = $this->model_catalog_product->getProductImages( $result['product_id'] );
                    if( $images ){
                        foreach( $images as $timage ){
                            if ($timage['image']) {
                                $tmp = $this->model_tool_image->resize($timage['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            } else {
                                $tmp = $this->model_tool_image->resize('placeholder.png', $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            }
                            $output[] = $tmp;
                        }
                    }
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="after">
                <![CDATA[
                    'images'      => $output,
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/category', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer category layout file

                $this->load->model( 'extension/module/pavothemer' );
                $layout =  $this->model_extension_module_pavothemer->getConfig( 'category_layout' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/category', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
    </file>

     <file path="catalog/controller/product/category.php">
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="before">
                <![CDATA[
                    $output = array();
                    $images = $this->model_catalog_product->getProductImages( $result['product_id'] );
                    if( $images ){
                        foreach( $images as $timage ){
                            if ($timage['image']) {
                                $tmp = $this->model_tool_image->resize($timage['image'], $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            } else {
                                $tmp = $this->model_tool_image->resize('placeholder.png', $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_width'), $this->config->get('theme_' . $this->config->get('config_theme') . '_image_product_height'));
                            }
                            $output[] = $tmp;
                        }
                    }
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$data['products'][] = array(]]></search>
            <add position="after">
                <![CDATA[
                    'images'      => $output,
                ]]>
            </add>
        </operation>
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('product/category', $data));]]></search>
            <add position="replace"><![CDATA[
                // pavothemer category layout file

                $this->load->model( 'extension/module/pavothemer' );
                $layout =  $this->model_extension_module_pavothemer->getConfig( 'category_layout' );
                $data['product_grid_layout']  =  $this->model_extension_module_pavothemer->getConfig( 'product_grid_layout' );
                if ( ! $layout ) {
                    $this->response->setOutput($this->load->view('product/category', $data));
                } else {
                    $this->response->setOutput($this->load->view('product/' . $layout, $data));
                }
            ]]></add>
        </operation>
    </file>


     <file path="admin/controller/catalog/information.php">
        <operation>
            <search><![CDATA[public function add() {]]></search>
            <add position="after"><![CDATA[
                 $this->document->addScript( "view/javascript/pavobuilder/information.js" );
            ]]></add>
        </operation>
        <operation>
            <search><![CDATA[public function edit() {]]></search>
            <add position="after"><![CDATA[
                 $this->document->addScript( "view/javascript/pavobuilder/information.js" );
            ]]></add>
        </operation>
     </file>
     <file path="catalog/controller/information/information.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('common/home');]]></search>
            <add position="before"><![CDATA[
            if( isset($data['description']) ) {
                $data['description'] = html_entity_decode($information_info['description'], ENT_QUOTES, 'UTF-8');
                if ( preg_match( '/blockbuilder \s*id=(\d+)\s+breadcrumb=(\d+)/', $data['description'], $matches ) ){

                    if( count($matches) == 3 ){
                        $this->load->model('setting/module');
                        $id = (int)$matches[1];
                        if ( isset($id) && $id > 0 ) {
                            $setting_info = $this->model_setting_module->getModule( $id );

                            if ($setting_info && $setting_info['status']) {
                                $data['heading_title'] = '';
                                $data['description'] = $this->load->controller('extension/module/pavobuilder' , $setting_info);
                                $data['blockbuilder'] = 1;
                                $data['breadcrumb'] = (int)$matches[2];
                            }
                        }
                    }
                }
            }
            ]]></add>
        </operation>
    </file>
     <file path="catalog/controller/information/contact.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('common/home');]]></search>
            <add position="before"><![CDATA[
            $this->load->language('extension/module/pavothemer');
            $data['text_message'] = $this->language->get('contact_success_text');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/edit.php">
        <operation>
            <search><![CDATA[$data['back'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/password.php">
        <operation>
            <search><![CDATA[$data['back'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/wishlist.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/order.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/download.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/recurring.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/reward.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/return.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/transaction.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/newsletter.php">
        <operation>
            <search><![CDATA[$data['back'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/affiliate.php">
        <operation>
            <search><![CDATA[$data['back'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/logout.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('common/home');]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/tracking.php">
        <operation>
            <search><![CDATA[$data['continue'] = $this->url->link('account/account', '', true);]]></search>
            <add position="after"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/register.php">
        <operation>
            <search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
            <add position="before"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/forgotten.php">
        <operation>
            <search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
            <add position="before"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/success.php">
        <operation>
            <search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
            <add position="before"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/reset.php">
        <operation>
            <search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
            <add position="before"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>

    <file path="catalog/controller/account/voucher.php">
        <operation>
            <search><![CDATA[$data['column_left'] = $this->load->controller('common/column_left');]]></search>
            <add position="before"><![CDATA[
                $data['heading_title'] = $this->language->get('heading_title');
            ]]></add>
        </operation>
    </file>